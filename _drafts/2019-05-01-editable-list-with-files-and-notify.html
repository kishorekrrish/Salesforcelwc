---
layout: post
title: Editable List with files and notify option in Salesforce Lightning (Aura)
date: '2019-05-01T09:51:00.000-07:00'
author: Kishore Bandanadam
tags:
- Apex
- Lightning
modified_time: '2019-11-01T11:59:49.251-07:00'
thumbnail: https://3.bp.blogspot.com/-MHuH6oGBK5o/XNaWXBA7miI/AAAAAAAAAQ8/lxVg2h-xwmUlALb8GyTfJfcahCIcmoGvwCLcBGAs/s72-c/Security-Officer.webp
blogger_id: tag:blogger.com,1999:blog-1420289748500157217.post-2240116415590882844
blogger_orig_url: https://www.salesforcelwc.in/2019/05/editable-list-with-files-and-notify.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><a href="https://www.salesforcelwc.in/2019/05/editable-list-with-files-and-notify.html" rel="">Editable List with files and notify option in Salesforce Lightning (Aura)</a><br /><br /></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" dir="ltr" style="clear: both; text-align: center;" trbidi="on"></div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-MHuH6oGBK5o/XNaWXBA7miI/AAAAAAAAAQ8/lxVg2h-xwmUlALb8GyTfJfcahCIcmoGvwCLcBGAs/s1600/Security-Officer.webp" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="Editable List with files and notify option in Salesforce Lightning (Aura)" border="0" data-original-height="410" data-original-width="640" src="https://3.bp.blogspot.com/-MHuH6oGBK5o/XNaWXBA7miI/AAAAAAAAAQ8/lxVg2h-xwmUlALb8GyTfJfcahCIcmoGvwCLcBGAs/s1600/Security-Officer.webp" title="Editable List with files and notify option in Salesforce Lightning (Aura)" /></a></div><div class="separator" dir="ltr" style="clear: both; text-align: center;" trbidi="on"><br /></div><div dir="ltr" style="text-align: left;" trbidi="on"></div><h1 dir="ltr" style="text-align: left;" trbidi="on"><a href="https://www.salesforcelwc.in/2019/05/editable-list-with-files-and-notify.html" rel="">Editable Contact List with files and notify option | Lightning (Aura)</a></h1><div dir="ltr" style="text-align: left;" trbidi="on"><br /><a name='more'></a></div><input name="IL_IN_ARTICLE" type="hidden" /><br /><div class="separator" dir="ltr" style="clear: both; text-align: center;" trbidi="on"><object class="BLOG_video_class" contentid="8b58c157cf12e4db" height="266" id="BLOG_video-8b58c157cf12e4db" width="320"></object></div><div dir="ltr" style="text-align: left;" trbidi="on"><br /><br /></div><blockquote class="tr_bq" dir="ltr" style="text-align: left;" trbidi="on"><span style="font-size: large;">AIM: To build a component which displays a list of records and associated files with an option to edit and notify.</span></blockquote><div dir="ltr" style="text-align: left;" trbidi="on"></div><h4 dir="ltr" style="text-align: left;" trbidi="on">&nbsp; </h4><div dir="ltr" style="text-align: left;" trbidi="on"></div><h3 style="text-align: left;">Access Files: </h3><div align="justify" dir="ltr" style="text-align: left;" trbidi="on"><span style="font-size: large;">Previously while using attachments in salesforce in order to get the attachments of particular record, we used to get all the attachments by using a simple SOQL statement on attachment object by specifying parentId.</span><br /><span style="font-size: large;"><br /></span> <span style="font-size: large;">But when it comes to files, it is a total different case. Files also comes with versioning. In order to completely utilize all the features providing we need to utilize following objects.</span></div><div dir="ltr" style="text-align: left;" trbidi="on"><ul style="text-align: left;"><li><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_contentdocumentlink.htm" rel="nofollow" target="_blank"><span style="font-size: large;">ContentDocumentLink</span></a></li><li><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_contentversion.htm" rel="nofollow" target="_blank"><span style="font-size: large;">ContentVersion</span></a></li><li><span style="font-size: large;"><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_contentdocument.htm" rel="nofollow" target="_blank">ContentDocument</a></span></li></ul><div><!-- Post Ad --><br /><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br /><!-- In Article Display Ads --><br /><ins class="adsbygoogle" data-ad-client="ca-pub-6753262254014660" data-ad-slot="9445070986" style="display: inline-block; height: 410px; width: 640px;"></ins><br /><script>     (adsbygoogle = window.adsbygoogle || []).push({}); </script><br /><!-- Post Ad --><br /></div></div><div align="justify"><span style="font-size: large;">With content version we can add another version of file to the existing file, It stores both the files as different versions. It helps in analyzing or finding changes made to the original file. We can always get the latest version by using “IsMajorVersion” or “IsLatest”.</span><br /><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-UJk7EB7mLXs/XNaZRNHfuCI/AAAAAAAAARg/zD0c1Aoclu8pHAkA6tXV5wSq2KLZRo2-QCLcBGAs/s1600/ConAttachment.cmp.webp" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="Editable List with files and notify option in Salesforce Lightning (Aura)" border="0" data-original-height="1600" data-original-width="1132" height="640" src="https://2.bp.blogspot.com/-UJk7EB7mLXs/XNaZRNHfuCI/AAAAAAAAARg/zD0c1Aoclu8pHAkA6tXV5wSq2KLZRo2-QCLcBGAs/s640/ConAttachment.cmp.webp" title="Editable List with files and notify option in Salesforce Lightning (Aura)" width="452" /></a></div><br /><br /><span style="font-size: large;">Every time a attachment is added or deleted an event is fired so that the components have the latest data of the files. Please understand the above image carefully as it shows the event firing and handling components.</span><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-R-Pg7HYdbNQ/XNaYoeKxfgI/AAAAAAAAARI/ggOkIQO1oxUR2S8RD7oioNyESEIWUCNYwCLcBGAs/s1600/LIST001.webp" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="Editable List with files and notify option in Salesforce Lightning (Aura)" border="0" data-original-height="574" data-original-width="1600" src="https://1.bp.blogspot.com/-R-Pg7HYdbNQ/XNaYoeKxfgI/AAAAAAAAARI/ggOkIQO1oxUR2S8RD7oioNyESEIWUCNYwCLcBGAs/s1600/LIST001.webp" title="Editable List with files and notify option in Salesforce Lightning (Aura)" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-xZARrRayLwY/XNaYzRGc17I/AAAAAAAAARM/Tc9vOqL5tQEBHaoPf0SCuCGefXKNyqg2QCLcBGAs/s1600/LIST2.webp" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="Editable List with files and notify option in Salesforce Lightning (Aura)" border="0" data-original-height="574" data-original-width="1600" src="https://3.bp.blogspot.com/-xZARrRayLwY/XNaYzRGc17I/AAAAAAAAARM/Tc9vOqL5tQEBHaoPf0SCuCGefXKNyqg2QCLcBGAs/s1600/LIST2.webp" title="Editable List with files and notify option in Salesforce Lightning (Aura)" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-zPBkAasj4xc/XNaY3VPqpUI/AAAAAAAAARQ/u5B3jBM-QZcuji_-gxciJq6txuX03W-2wCLcBGAs/s1600/LIST3.webp" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="Editable List with files and notify option in Salesforce Lightning (Aura)" border="0" data-original-height="574" data-original-width="1600" src="https://1.bp.blogspot.com/-zPBkAasj4xc/XNaY3VPqpUI/AAAAAAAAARQ/u5B3jBM-QZcuji_-gxciJq6txuX03W-2wCLcBGAs/s1600/LIST3.webp" title="Editable List with files and notify option in Salesforce Lightning (Aura)" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br /><h3 style="text-align: left;">Controller:</h3><span style="font-size: large;">ContactAttachWrapperUsingContentVersion.apxc</span><br /><br /><h3 style="text-align: left;">Components:</h3><h4 style="text-align: left;">ConAttachment:</h4><ul style="text-align: left;"><li><span style="font-size: large;">ConAttachment.cmp</span></li><li><span style="font-size: large;">ConAttachmentController.js</span></li></ul><h4 style="text-align: left;">AttachmentUploader:</h4><ul style="text-align: left;"><li><span style="font-size: large;">AttachmentUploader.cmp</span></li><li><span style="font-size: large;"> AttachmentUploaderController.js</span></li></ul><h4 style="text-align: left;">DeleteAttachmentsCV:</h4><div><ul style="text-align: left;"><li><span style="font-size: large;">DeleteAttachmentsCV.cmp</span></li><li><span style="font-size: large;">DeleteAttachmentsCVController.js</span></li></ul></div><h4 style="text-align: left;">NotifyModal:</h4><div><ul style="text-align: left;"><li><span style="font-size: large;">NotifyModal.cmp</span></li><li><span style="font-size: large;">NotifyModalController.js</span></li></ul></div><div><!-- Post Ad --><br /><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br /><!-- In Article Display Ads --><br /><ins class="adsbygoogle" data-ad-client="ca-pub-6753262254014660" data-ad-slot="9445070986" style="display: inline-block; height: 410px; width: 640px;"></ins><br /><script>     (adsbygoogle = window.adsbygoogle || []).push({}); </script><br /><!-- Post Ad --><br /><h3 style="text-align: left;">ContactAttachWrapperUsingContentVersion.apxc:</h3><pre class="lang-js"><code><br />public class ContactAttachWrapperUsingContentVersion {<br />    <br />    // Wrapper method with contact and its attachment list "content versions"<br />    @AuraEnabled<br />    public static List<attachwrap> getConAttachments(){<br />        <br />        //List<contact> conList = [Select id, Name from Contact where Name LIKE '%Ki%'];<br />        map<id list="" ontentversion="">&gt; mapParentIdFiles = new map<id list="" ontentversion="">&gt;();<br />        //Map of Contact Id and Contact sObject<br />        //Map<id ontact=""> conList = new Map<id ontact="">([Select id, Name, Account.Name, Phone from Contact where Name LIKE '%Ki%']);<br />        Map<id ontact=""> conList = new Map<id ontact="">([Select id, Name, FirstName, LastName, Email, Account.Name, Phone from Contact LIMIT 50]);<br />        System.debug(':::conList:::'+conList);<br />        List<contentdocumentlink> CDLs = new List<contentdocumentlink>();<br />        //map of contact and list of ContentDocumentIds<br />        Map<string d="" list="">&gt; cvMap = new Map<string d="" list="">&gt;();<br />        //Set of contact Ids<br />        set<id> conIds = conList.keySet();<br />        System.debug(':::conIds:::'+conIds);<br />        <br />        if(conList.Size() &gt; 0 &amp;&amp; conList != NULL){<br />            CDLs = [Select ContentDocumentId, LinkedEntityId <br />                    from ContentDocumentLink <br />                    where LinkedEntityId IN : conIds];<br />            System.debug(':::CDLs:::'+CDLs);<br />        }<br />        <br />        if(CDLs.Size() &gt; 0 &amp;&amp; CDLs != NULL){<br />            for(ContentDocumentLink c : CDLs){<br />                if(cvMap.containsKey(c.LinkedEntityId)){<br />                    List<id> cd = cvMap.get(c.LinkedEntityId);<br />                    if(c.ContentDocumentId != NULL)<br />                        cd.add(c.ContentDocumentId);<br />                    System.debug(':::cd:::'+cd);<br />                    cvMap.put(c.LinkedEntityId, cd);<br />                }else{<br />                    cvMap.put(c.LinkedEntityId, new List<id> { c.ContentDocumentId });<br />                }<br />            }<br />            System.debug(':::cvMap:::'+cvMap);<br />        }<br />        <br />        //Set of document Ids<br />        set<id> setDocumentIds = new set<id>();<br />        List<contentdocumentlink> fileLinks = [select Id, LinkedEntityId, ContentDocumentId from ContentDocumentLink where LinkedEntityId in: conIds];<br />        for(ContentDocumentLink fileLink: fileLinks){<br />            setDocumentIds.add(fileLink.ContentDocumentId);<br />        }<br />        <br />        //creating map of ContentDocumentId and content version<br />        map<id contentversion=""> mapContentVersion = new map<id contentversion="">();<br />        for(ContentVersion cv: [select Id, title, ContentDocumentId from ContentVersion where ContentDocumentId in: setDocumentIds]){<br />            mapContentVersion.put(cv.ContentDocumentId, cv);<br />        }<br />        <br />        //Map of contact Ids and content version<br />        for(ContentDocumentLink fileLink: fileLinks){<br />            if(mapContentVersion.containsKey(fileLink.ContentDocumentId)){<br />                if(mapParentIdFiles.containsKey(fileLink.LinkedEntityId)){<br />                    mapParentIdFiles.get(fileLink.LinkedEntityId).add(mapContentVersion.get(fileLink.ContentDocumentId));<br />                }else{<br />                    mapParentIdFiles.put(fileLink.LinkedEntityId, new List<contentversion>{mapContentVersion.get(fileLink.ContentDocumentId)});<br />                }<br />            }<br />        }<br />        <br />        <br />        List<attachwrap> wrapList = new List<attachwrap>();<br />        <br />        <br />        for(Contact c : conList.values()){<br />            wrapList.add(new attachWrap(c, mapParentIdFiles.get(c.id)));<br />        }<br />        <br />        System.debug(':::wrapList:::'+wrapList);<br />        return wrapList;<br />    }<br />    // End of wrapper method<br />    <br />    //Wrapper class<br />    public class attachWrap{<br />        <br />        @AuraEnabled public Contact  wCon {get;set;}<br />        @AuraEnabled public List<contentversion> wCV {get;set;}<br />        <br />        public attachWrap(Contact con, List<contentversion> CV){<br />            wCon = con;<br />            wCV =  CV;<br />        }<br />    }<br />    <br />    //Attachment delete method<br />    @AuraEnabled<br />    public static boolean deleteAttachments(Id attachId){<br />        <br />        if(attachId != NULL){<br />            ContentDocument file = [Select Id from ContentDocument where Id = :attachId];<br />            delete file;<br />            return true;<br />        }<br />        else{<br />            return false;<br />        }<br />    }<br />    <br />    @AuraEnabled<br />    public static boolean updateContact(Contact con){<br />        <br />        if(con != NULL){<br />            //Contact con = [Select Id from ContentDocument where Id = :attachId];<br />            update con;<br />            return true;<br />        }<br />        else{<br />            return false;<br />        }<br />    }<br />  <br />}<br /></contentversion></contentversion></attachwrap></attachwrap></contentversion></id></id></contentdocumentlink></id></id></id></id></id></string></string></contentdocumentlink></contentdocumentlink></id></id></id></id></id></id></contact></attachwrap></code></pre></div></div><br /><h3 style="text-align: left;">ConAttachment.cmp:</h3><pre class="lang-markup"><code><br />&lt;aura:component controller="ContactAttachWrapperUsingContentVersion" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId" access="global" &gt;<br />    <br />    &lt;aura:attribute name="wrapperList" type="object[]"/&gt;<br />    &lt;aura:handler name="init" value="{!this}" action="{!c.doinit}"/&gt;<br />    &lt;aura:attribute name="sNo" type="Integer" default= "1"/&gt;<br />    &lt;aura:attribute name="Spinner" type="boolean" default="false"/&gt;<br />    <br />    &lt;aura:attribute name="isOpen" type="Boolean" default="false"/&gt;<br />    <br />    &lt;aura:handler name="AttachmentUploaderEvent" event="c:AttachmentUploaderEvent" action="{!c.handleComponentEvent}"/&gt;<br />    <br />    &lt;aura:handler name="DeleteNotifyComponentEvent" event="c:DeleteNotifyComponentEvent" action="{!c.DeleteNotify}"/&gt;<br />    &lt;aura:registerEvent name="DeleteAttachmentsEvent" type="c:DeleteAttachmentsEvent"/&gt;<br />    <br />    &lt;!-- Spinner--&gt;<br />    &lt;aura:handler event="aura:waiting" action="{!c.showSpinner}"/&gt;<br />    &lt;aura:handler event="aura:doneWaiting" action="{!c.hideSpinner}"/&gt;<br />    <br />    &lt;!--aura:registerEvent name="DeleteAttachmentsEvent" type="c:DeleteAttachmentsEvent"/--&gt;<br />    &lt;!--aura:registerEvent name="OpenModalEvent" type="c:OpenModalEvent"/--&gt;<br />    &lt;c:Header/&gt;<br />    &lt;div class="slds-table--header-fixed_container"&gt;<br />        &lt;div class="slds-scrollable_y" style="height: 36rem;"&gt;<br />            &lt;table class="slds-table slds-table_cell-buffer slds-table_bordered"&gt;<br />                &lt;thead&gt;<br />                    &lt;tr class="slds-line-height_reset"&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="ID"&gt;Select&lt;/div&gt;<br />                        &lt;/th&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="ID"&gt;Contact Name&lt;/div&gt;<br />                        &lt;/th&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="Email"&gt;Email&lt;/div&gt;<br />                        &lt;/th&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="Phone"&gt;Phone&lt;/div&gt;<br />                        &lt;/th&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="Attachments"&gt;Attachments&lt;/div&gt;<br />                        &lt;/th&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="Add"&gt;Add Attachments&lt;/div&gt;<br />                        &lt;/th&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="Edit"&gt;Edit Contact&lt;/div&gt;<br />                        &lt;/th&gt;<br />                        &lt;th class="slds-text-title_caps" scope="col"&gt;<br />                            &lt;div class="slds-truncate" title="Notify"&gt;Notify&lt;/div&gt;<br />                        &lt;/th&gt;<br />                    &lt;/tr&gt;<br />                &lt;/thead&gt;<br />                <br />                &lt;tbody&gt;<br /><br />                    <br />                    &lt;aura:iteration items="{!v.wrapperList}" var="w" indexVar="i"&gt;<br />                        <br />                        &lt;tr class="slds-hint-parent"&gt;<br />                            &lt;td data-label="Select"&gt;<br />                                {!v.sNo + i}<br />                                &lt;!--div class="" title="Select"&gt;&lt;lightning:input type="checkbox" name="input1"/&gt;&lt;/div--&gt;<br />                            &lt;/td&gt;<br />                            &lt;td data-label="Contact Name"&gt;<br />                                &lt;div class="" title="{!w.wCon.Id}"&gt;&lt;a title="{!w.wCon.Id}" onclick="{!c.detailPage}"&gt;{!w.wCon.Name}&lt;/a&gt;&lt;/div&gt;<br />                            &lt;/td&gt;<br />                            &lt;td data-label="Email"&gt;<br />                                &lt;div class="slds-truncate" title="{!w.wCon.Email}"&gt;{!w.wCon.Email}&lt;/div&gt;<br />                            &lt;/td&gt;<br />                            &lt;td data-label="Phone"&gt;<br />                                &lt;div class="slds-truncate" title="{!w.wCon.Phone}"&gt;{!w.wCon.Phone}&lt;/div&gt;<br />                            &lt;/td&gt;<br />                            &lt;td data-label="Loop"&gt;<br />                                &lt;lightning:layout  multipleRows="true"&gt;<br />                                    &lt;aura:iteration items="{!w.wCV}" var="wc"&gt;<br />                                        <br />                                        <br />                                        &lt;lightning:layoutItem size="2"&gt;<br />                                            &lt;lightning:buttonIcon size="large" iconName="utility:file" title="{!wc.Title}" value ="{!wc.ContentDocumentId}" variant="bare" onclick="{! c.handleClick }"/&gt;<br />                                        &lt;/lightning:layoutItem&gt;<br />                                        <br />                                        <br />                                        <br />                                        &lt;!--lightning:fileCard fileId="{!wc}" description="view"/&gt;&lt;br/--&gt;<br />                                    &lt;/aura:iteration&gt;<br />                                &lt;/lightning:layout&gt;<br />                            &lt;/td&gt;<br />                            &lt;td data-label="Add Attachments"&gt;<br />                                &lt;div class="slds-truncate" title="Add Attachments"&gt;&lt;c:AttachmentUploader recordId="{!w.wCon.Id}"/&gt;&lt;/div&gt;<br />                            &lt;/td&gt;<br />                            &lt;td data-label="Edit Contact"&gt;<br />                                &lt;div class="slds-truncate" title="Edit"&gt;&lt;lightning:buttonIcon value="{!w}" size="large" iconName="utility:edit" onclick="{!c.openDetail}"/&gt;&lt;/div&gt;<br />                            &lt;/td&gt;<br />                            &lt;td data-label="Edit Contact"&gt;<br />                                &lt;div class="slds-truncate" title="Edit"&gt;&lt;lightning:button label="Notify" value="{!w.wCon.Id}" onclick="{!c.openNotify}"/&gt;&lt;/div&gt;<br />                            &lt;/td&gt;<br /><br />                        &lt;/tr&gt;<br />                        <br />                    &lt;/aura:iteration&gt;<br />                    <br />                &lt;/tbody&gt;<br />                <br />            &lt;/table&gt;<br />        &lt;/div&gt;    <br />    &lt;/div&gt;<br />    &lt;c:DeleteAttachmentsCV/&gt;<br /><br />    &lt;!--c:Footer/--&gt;<br />    &lt;!--c:DeleteAttachments aura:id="childComp"/--&gt;<br />    &lt;aura:if isTrue="{!v.isOpen}"&gt;<br />        &lt;div class="demo-only" style="height: 640px;"&gt;<br />            &lt;section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open"&gt;<br />                &lt;div class="slds-modal__container"&gt;<br />                    &lt;div class="slds-float_right"&gt;<br />                        &lt;lightning:buttonIcon  iconName="utility:close" size="large" variant="bare-inverse" onclick="{!c.closeModal}"/&gt;<br />                    &lt;/div&gt;<br />                    &lt;div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1"&gt;<br />                        &lt;c:NotifyModal recordId="{!v.recordId}"/&gt;<br />                    &lt;/div&gt;<br />                &lt;/div&gt;<br />            &lt;/section&gt;<br />            &lt;div class="slds-backdrop slds-backdrop_open"&gt;&lt;/div&gt;<br />        &lt;/div&gt;<br />    &lt;/aura:if&gt;<br />&lt;/aura:component&gt;<br /></code></pre><br /><h3 style="text-align: left;"><b>ConAttachmentController.js: </b></h3><pre class="lang-js"><code><br />({<br />    doinit : function(component, event, helper) {<br />        console.log("In Init");<br />        var action = component.get("c.getConAttachments");<br />        //action.setStorable();<br />        console.log("action");<br />        console.log(action);<br />        action.setCallback(this, function(response){<br />            var state = response.getState();<br />            console.log("state");<br />            console.log(state);<br />            if(state === "SUCCESS"){<br />                var result = response.getReturnValue();<br />                console.log("result");<br />                console.log(result);<br />                component.set("v.wrapperList", result);<br />            }<br />        });<br />        $A.enqueueAction(action);<br />    },<br />    handleClick : function(component, event, helper) {<br />        console.log("In Handleclick");<br />        var lis = event.getSource().get("v.value");<br />        console.log(lis);<br />        $A.get('e.lightning:openFiles').fire({<br />            recordIds: [lis],<br />            //selectedRecordId: lis[1]<br />        });<br />    },<br />    <br />    handleComponentEvent : function(component, event, helper) {<br />        <br />        var callDoinit = component.get('c.doinit');<br />        $A.enqueueAction(callDoinit);<br />    },<br />    <br />    handleDelete : function(component, event, helper) {<br />        //Open modal event<br />        var OpenModalEvent = component.getEvent("OpenModalEvent");<br />        OpenModalEvent.fire();<br />        <br />        var childcomponent= component.find("childComp");<br />        console.log("In handle delete");<br />        var Ids = event.getSource().get("v.value");<br />        console.log("To be deleted Ids::::::");<br />        console.log(Ids);<br />        childcomponent.childmethod(Ids);<br />        <br />        /*var DeleteAttachmentsEvent = $A.get("e.c:DeleteAttachmentsEvent");<br />        DeleteAttachmentsEvent.setParams({<br />            toDeleteIds : Ids<br />        });*/<br />        //console.log("Event");<br />        //console.log(DeleteAttachmentsEvent);<br />        //DeleteAttachmentsEvent.fire();<br />    },<br />    <br />    detailPage : function(component, event, helper) {<br />        var detailId1 = event.currentTarget.title;<br />        console.log("detailId1:::::"+detailId1);<br />        //var detailId2 = event.getSource().getLocalId();<br />        //console.log("detailId2:::::"+detailId2);<br />        var navEvt = $A.get("e.force:navigateToSObject");<br />        navEvt.setParams({<br />            "recordId": detailId1,<br />            "slideDevName": "detail"<br />        });<br />        navEvt.fire();<br />    },<br />    openDetail : function(component, event, helper) {<br />        console.log("Event fired");<br />        <br />        // getting here the wrapper obj from iteration<br />        var files = event.getSource().get("v.value");<br />        console.log("files are: ", JSON.stringify(files));<br />                <br />        var appEvent = $A.get("e.c:DeleteAttachmentsEvent");<br />        appEvent.setParams({<br />            "toDeleteIds" :  files<br />        });<br />        appEvent.fire();<br />    },<br />    <br />    DeleteNotify : function(component, event, helper) {<br />        <br />        var init = component.get("c.doinit");<br />        $A.enqueueAction(init);<br />    },<br />    <br />    showSpinner : function(component, event, helper) {<br />        component.set("v.Spinner", true); <br />    },<br />    <br />    hideSpinner : function(component, event, helper) {<br />        component.set("v.Spinner", false); <br />    },<br />    <br />    openNotify : function(component, event, helper) {<br />        console.log("In open notify in poc");<br />        <br /><br />        var rec = event.getSource().get("v.value");<br />        console.log(rec);<br />        component.set("v.recordId", rec);<br />        <br />        var open = component.get("v.isOpen");<br />        console.log(open);<br />        <br />        component.set("v.isOpen", true);<br />    },<br />    <br />    closeModal : function(component, event, helper) {<br />;<br />        <br />        component.set("v.isOpen", false);<br />        console.log("In close notify");<br />        <br />    },<br />})<br /></code></pre><br /><h3 style="text-align: left;"><b>AttachmentUploader.cmp:</b></h3><div><pre class="lang-markup"><code><br />&lt;!-- AttachmentUploader--&gt;<br />&lt;aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,force:lightningQuickAction" access="global" &gt;<br /> <br />    &lt;aura:attribute name="recordId" type="Id"/&gt;<br />    &lt;aura:attribute name="accept" type="List" default="['.jpg', '.jpeg', '.pdf', '.zip', '.png']"/&gt;<br />    &lt;aura:attribute name="multiple" type="Boolean" default="true"/&gt;<br />    &lt;aura:attribute name="disabled" type="Boolean" default="false"/&gt;<br />    <br />    &lt;aura:registerEvent name="AttachmentUploaderEvent" type="c:AttachmentUploaderEvent"/&gt;<br />    &lt;aura:registerEvent name="updateAttachmentsAppEvent" type="c:updateAttachmentsAppEvent"/&gt;<br />    <br />    &lt;lightning:fileUpload<br />                          multiple="{!v.multiple}" <br />                          accept="{!v.accept}" <br />                          recordId="{!v.recordId}" <br />                          onuploadfinished="{!c.handleUploadFinished}" /&gt;<br />    <br />    <br />&lt;/aura:component&gt;<br /></code></pre></div><br /><!--PostAd--><br /><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br /><!-- In Post --><br /><ins class="adsbygoogle"      style="display:block"      data-ad-client="ca-pub-6753262254014660"      data-ad-slot="8484998091"      data-ad-format="auto"      data-full-width-responsive="true"></ins><br /><script>     (adsbygoogle = window.adsbygoogle || []).push({}); </script><br /><!--PostAd--><br /><h3 style="text-align: left;"><b>AttachmentUploaderController.js  </b></h3><div><pre class="lang-js"><code><br />({<br />    handleUploadFinished : function(component, event, helper) {<br />        var uploadedFiles = event.getParam("files");<br />        var documentId = uploadedFiles[0].documentId;<br />        var fileName = uploadedFiles[0].name;<br />        console.log("In ");<br />        for(var i = 0; i &lt; uploadedFiles.length; i++){<br />            console.log(uploadedFiles[i].name);<br />        }<br />        <br />        var toastEvent = $A.get("e.force:showToast");<br />        for(var i = 1; i &lt; uploadedFiles.length; i++){<br />            fileName = fileName + ','+''+ uploadedFiles[i].name;<br />        }<br />        console.log("Names::::::"+fileName);<br />        <br />        toastEvent.setParams({<br />            "title": "Success!",<br />            "message": "File(s) "+ fileName +" Uploaded successfully.",<br />            "type" : "SUCCESS"<br />        });<br />        toastEvent.fire();<br />        <br />        <br />        var attachmentUploaderEvent = component.getEvent("AttachmentUploaderEvent");<br />   attachmentUploaderEvent.setParam("Uploaded", "Success");<br />         attachmentUploaderEvent.fire();<br />        <br />        <br />        var updateAttachmentsAppEvent = component.getEvent("updateAttachmentsAppEvent");<br />         updateAttachmentsAppEvent.fire();<br />        /*$A.get('e.lightning:openFiles').fire({<br />            recordIds: [documentId]<br />        });*/<br />        <br />    }<br />})<br /></code></pre></div><br /><h3 style="text-align: left;"><b>DeleteAttachmentsCV.cmp</b></h3><div><pre class="lang-markup"><code><br />&lt;!-- DeleteAttachmentsCV --&gt;<br /><br />&lt;aura:component controller="ContactAttachWrapperUsingContentVersion" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,force:lightningQuickAction" access="global" &gt;<br /><br />    &lt;aura:attribute name="isOpen" type="boolean"/&gt;<br /><br />    &lt;aura:attribute name="fileIds" type="Object"/&gt;<br /><br />    &lt;aura:attribute name="aIds" type="List"/&gt;<br /><br />    &lt;aura:attribute name="sNo" type="Integer" default="1"/&gt;<br /><br />    <br /><br />    &lt;aura:handler event="c:DeleteAttachmentsEvent" action="{!c.handleDeleteEvent}"/&gt;<br /><br />    <br /><br />    &lt;aura:registerEvent name="deleteRow" type="c:DeleteRowEvent"/&gt;<br /><br />    &lt;aura:registerEvent name="DeleteNotifyComponentEvent" type="c:DeleteNotifyComponentEvent"/&gt;<br /><br />    &lt;aura:handler name="deleteRow" event="c:DeleteRowEvent" action="{!c.deleteRow}"/&gt;<br /><br />    <br /><br />    &lt;!--aura:method name="childmethod" action="{!c.handleDeleteEvent}"&gt; <br /><br />        &lt;aura:attribute name="fileIds" type="Object"/&gt; <br /><br />    &lt;/aura:method--&gt;<br /><br />    <br /><br />    &lt;aura:if isTrue="{!v.isOpen}"&gt;<br /><br />        &lt;div class="demo-only" style="height: 640px;"&gt;<br /><br />            &lt;section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open"&gt;<br /><br />                &lt;div class="slds-modal__container"&gt;<br /><br />                    &lt;header class="slds-modal__header"&gt;<br /><br />                        &lt;div class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close"&gt;<br /><br />                            &lt;lightning:buttonIcon iconName="utility:close" <br /><br />                                                  onclick="{! c.closeModal }" <br /><br />                                                  variant="bare-inverse"<br /><br />                                                  size="large"<br /><br />                                                  alternativeText="close" /&gt;<br /><br />                        &lt;/div&gt;<br /><br />                        &lt;h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate"&gt;{!v.fileIds.Name} Details&lt;/h2&gt;<br /><br />                    &lt;/header&gt;<br /><br />                    &lt;div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1"&gt;<br /><br />                        &lt;!--Contact Form--&gt;<br /><br />                        <br /><br />                        &lt;div class="slds-grid slds-wrap"&gt;<br /><br />                            &lt;div class="slds-col slds-size_1-of-2 slds-p-left_x-large"&gt;<br /><br />                                &lt;lightning:input name="ContactName" label="First Name" value="{!v.fileIds.FirstName}"/&gt;<br /><br />                            &lt;/div&gt;<br /><br />                            &lt;div class="slds-col slds-size_1-of-2 slds-p-left_x-large"&gt;<br /><br />                                &lt;lightning:input name="ContactName" label="Last Name" value="{!v.fileIds.LastName}"/&gt;<br /><br />                            &lt;/div&gt;<br /><br />                            &lt;div class="slds-col slds-size_1-of-2 slds-p-left_x-large"&gt;<br /><br />                                &lt;lightning:input type="email" name="Email" label="Email" value="{!v.fileIds.Email}"/&gt;<br /><br />                            &lt;/div&gt;<br /><br />                            &lt;div class="slds-col slds-size_1-of-2 slds-p-left_x-large"&gt;<br /><br />                                &lt;lightning:input type="tel" name="ContactName" label="Phone" value="{!v.fileIds.Phone}"/&gt;<br /><br />                            &lt;/div&gt;<br /><br />                        &lt;/div&gt;<br /><br />                        <br /><br />                        &lt;!--Contact Form End--&gt;<br /><br /><br />                        &lt;br/&gt;<br /><br />                        &lt;h2&gt;Attachments&lt;/h2&gt;<br /><br />                        &lt;table class="slds-table slds-table_cell-buffer slds-table_bordered"&gt;<br /><br />                            &lt;thead&gt;<br /><br />                                &lt;tr class="slds-line-height_reset"&gt;<br /><br />                                    &lt;th class="slds-text-title_caps" scope="col"&gt;<br /><br />                                        &lt;div class="slds-truncate" title="S.No"&gt;S.No&lt;/div&gt;<br /><br />                                    &lt;/th&gt;<br /><br />                                    &lt;th class="slds-text-title_caps" scope="col"&gt;<br /><br />                                        &lt;div class="slds-truncate" title="Attachment Name"&gt;Attachment Name&lt;/div&gt;<br /><br />                                    &lt;/th&gt;<br /><br />                                    &lt;th class="slds-text-title_caps" scope="col"&gt;<br /><br />                                        &lt;div class="slds-truncate" title="Delete"&gt;Delete&lt;/div&gt;<br /><br />                                    &lt;/th&gt;<br /><br />                                &lt;/tr&gt;<br /><br />                            &lt;/thead&gt;<br /><br />                            &lt;tbody&gt;<br /><br />                                <br /><br />                                &lt;aura:iteration items="{!v.aIds}" var="f"  indexVar="i"&gt;<br /><br />                                    &lt;tr&gt;<br /><br />                                        &lt;td data-label="Sno" scope="row"&gt;<br /><br />                                            &lt;div class="slds-truncate" title="Cloudhub"&gt;{!v.sNo + i}&lt;/div&gt;<br /><br />                                        &lt;/td&gt;<br /><br />                                        &lt;td data-label="Title"&gt;<br /><br />                                            &lt;div class="slds-truncate" title="Attachment Title"&gt;&lt;lightning:formattedText value="{!f.Title}"/&gt;&lt;/div&gt;<br /><br />                                        &lt;/td&gt;<br /><br />                                        &lt;td data-label="Delete"&gt;<br /><br />                                            &lt;div class="slds-truncate" title="DeleteIcon"&gt;&lt;lightning:buttonIcon iconName="utility:delete" value="{!f.ContentDocumentId}" size="large" variant="bare"  alternativeText="delete" onclick="{!c.deleteFile}"/&gt;&lt;/div&gt;<br /><br />                                        &lt;/td&gt;<br /><br />                                    &lt;/tr&gt;<br /><br />                                &lt;/aura:iteration&gt;  <br /><br />                            &lt;/tbody&gt;<br /><br />                        &lt;/table&gt;<br /><br />                    &lt;/div&gt;<br /><br />                    &lt;footer class="slds-modal__footer"&gt;<br /><br />                        &lt;div&gt;<br /><br />                            &lt;lightning:button label="Update" variant="brand" onclick="{!c.UpdateContact}"/&gt;<br /><br />                            &lt;lightning:button label="Cancel" variant="destructive" onclick="{!c.closeModal}"/&gt;<br /><br />                        &lt;/div&gt;<br /><br />                    &lt;/footer&gt;<br /><br />                &lt;/div&gt;<br /><br />            &lt;/section&gt;<br /><br />            &lt;div class="slds-backdrop slds-backdrop_open"&gt;&lt;/div&gt;<br /><br />        &lt;/div&gt;<br /><br />    &lt;/aura:if&gt;<br /><br />    <br /><br />    &lt;!--lightning:button label="Delete files" onclick="{!c.openModal}"/--&gt;<br /><br />&lt;/aura:component&gt;<br /></code></pre></div><br /><h3 style="text-align: left;"><b>DeleteAttachmentsCVController.js</b></h3><div><pre class="lang-js"><code><br />({<br />    handleDeleteEvent : function(component, event, helper) {<br />        var deleteFiles = event.getParam("toDeleteIds");<br />        if(deleteFiles.wCon){<br />        component.set("v.fileIds", deleteFiles.wCon);<br />        }<br />        console.log("deleteFiles",JSON.stringify(deleteFiles));<br />        <br />        if(deleteFiles.wCV != null){<br />            var attachIds = [];<br />            for(var i = 0; i &lt; deleteFiles.wCV.length; i++){<br />                attachIds.push({<br />                    Title : deleteFiles.wCV[i].Title, Id : deleteFiles.wCV[i].Title, ContentDocumentId : deleteFiles.wCV[i].ContentDocumentId<br />                });<br />            }<br />            component.set("v.aIds", attachIds);<br />            console.log("attachIds",attachIds);<br />        }<br />        else{<br />            var attachIds = [];<br />            component.set("v.aIds", attachIds);<br />        }<br />        //console.log("deleteFiles[0].Title::::"+deleteFiles.wCV[0].Title);<br />        if(deleteFiles.wCon === null){<br />            <br />            //Toast message on deletion if there are no records in list<br />            var toastEvent = $A.get("e.force:showToast");<br />            <br />            toastEvent.setParams({<br />                "title": "Attention!",<br />                "message": "There are no files to delete",<br />                "type" : "ERROR"<br />            });<br />            toastEvent.fire();<br />        }else{<br />            component.set("v.isOpen", true);<br />        }<br />        /*var deleteFiles = component.get("v.fileIds");<br />        console.log("deleteFiles");<br />        console.log(deleteFiles);*/<br />        <br />    },<br />    <br />    closeModal : function(component, event, helper) {<br />        component.set("v.isOpen", false);<br />    },<br />    <br />    openModal : function(component, event, helper) {<br />        component.set("v.isOpen", true);<br />    },<br />    <br />    deleteFile : function(component, event, helper) {       <br />        var fileToDelete = event.getSource().get("v.value");       <br />        var action = component.get("c.deleteAttachments");<br />        action.setParams({<br />            attachId : fileToDelete<br />        });<br />        action.setCallback(this, function(response){            <br />            var state = response.getState();           <br />            if(state === "SUCCESS"){<br />                var result = response.getReturnValue();<br />                console.log(result);<br />                if(result === true){<br />                    <br />                    //alert(component.get("v.rowIndex"));<br />                    var index = component.getEvent("deleteRow");<br />                    index.setParams({<br />                        "rowIndex" : component.get("v.sNo")<br />                    });<br />                    index.fire();<br />                }<br />            }<br />        });<br />        $A.enqueueAction(action);<br />    },<br />    <br />    deleteRow : function(component, event, helper) {<br />        var index = event.getParams("v.sNo");<br />        //alert(index);<br />        var AllRowsList = component.get("v.aIds");<br />        AllRowsList.splice(index, 1);<br />        component.set("v.aIds", AllRowsList);<br />        <br />        //Close Modal<br />        //component.set("v.isOpen", false);<br />        <br />        var delEvntNotify = component.getEvent("DeleteNotifyComponentEvent");<br />        delEvntNotify.fire();<br />        <br />        //Toast message on deletion<br />        var toastEvent = $A.get("e.force:showToast");<br />        <br />        toastEvent.setParams({<br />            "title": "Success!",<br />            "message": "File deleted successfully.",<br />            "type" : "SUCCESS"<br />        });<br />        toastEvent.fire();<br />    },<br />    <br />    UpdateContact : function(component, event, helper) {<br />        <br />        var updatedCon = component.get("v.fileIds")<br />        console.log("updatedCon::");<br />        console.log(JSON.stringify(updatedCon));<br />        <br />        var action = component.get("c.updateContact");<br />        action.setParams({<br />            con : updatedCon<br />        });<br />        <br />        action.setCallback(this, function(response){<br />            console.log("In call back");<br />            var state = response.getState();<br />            console.log(state);<br />            if(state === "SUCCESS"){<br />                var result = response.getReturnValue();<br />                console.log(result);<br />                if(result == true){<br />                    //Toast message on deletion<br />                    var toastEvent = $A.get("e.force:showToast");<br />                    <br />                    toastEvent.setParams({<br />                        "title": "Success!",<br />                        "message": "File Updated successfully.",<br />                        "type" : "SUCCESS"<br />                    });<br />                    toastEvent.fire();<br />                    // Event to notify parent about update<br />                    var delEvntNotify = component.getEvent("DeleteNotifyComponentEvent");<br />                    delEvntNotify.fire();<br />                    //To close modal<br />                    component.set("v.isOpen", false);<br />                }else{<br />                    var toastEvent = $A.get("e.force:showToast");<br />                    <br />                    toastEvent.setParams({<br />                        "title": "Failed!",<br />                        "message": "File Updated Error.",<br />                        "type" : "ERROR"<br />                    });<br />                }<br />            }<br />        });<br />        $A.enqueueAction(action);<br />    }<br />})<br /></code></pre></div><br /><span style="font-size: large;">To understand Notify component fully please visit this post.</span><br /><div><blockquote class="tr_bq" style="text-align: left;"><a href="https://www.salesforcelwc.in/2019/04/create-custom-component-to-send-email.html" rel="nofollow"><span style="font-size: large;">Related:</span>&nbsp;&nbsp; <b><span style="font-size: large;">Create a Custom Component to Send an Email in Salesforce Lightning</span></b>&nbsp;</a></blockquote><br /><h3 style="text-align: left;"><b>NotifyModal.cmp</b></h3><div><pre class="lang-markup"><code><br />&lt;!-- NotifyModal --&gt;<br /><br />&lt;aura:component controller="NotifyController" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,force:lightningQuickActionWithoutHeader" access="global" &gt;<br /><br />    <br /><br />    <br /><br />    <br /><br />    &lt;aura:attribute name="recordId" type="Id"/&gt;<br /><br />    &lt;aura:attribute name="open" type="Boolean" default="false"/&gt;<br /><br />    &lt;aura:attribute name="ownerId" type="Map[]"/&gt;<br /><br />    &lt;aura:attribute name="selected" type="Map[]"/&gt;<br /><br />    &lt;aura:attribute name="fvalues" type="Map[]"/&gt;<br /><br />    &lt;aura:attribute name="cCUser" type="Map[]"/&gt;<br /><br />    &lt;aura:attribute name="cCContact" type="Map[]"/&gt;<br /><br />    &lt;aura:attribute name="toUser" type="Map[]"/&gt;<br /><br />    &lt;aura:attribute name="toContact" type="Map[]"/&gt;<br /><br />    &lt;aura:attribute name="subject" type="String"/&gt;<br /><br />    &lt;aura:attribute name="body" type="String"/&gt;<br /><br />    <br /><br />    &lt;aura:handler name="init" value="{!this}" action="{!c.doinit}"/&gt;<br /><br /> <br /><br />    <br /><br />    &lt;!-- Handling to get Final values of lookups --&gt;<br /><br />    &lt;aura:handler name="CustomLookUpFinalValueEvent" event="c:CustomLookUpFinalValueEvent" action="{!c.finalValueAction}"/&gt;<br /><br />    &lt;!-- handling onselect values while attaching docs --&gt;<br /><br />    &lt;aura:handler name="selectedAttachmentsNotifyEvent" event="c:selectedAttachmentsNotifyEvent" action="{!c.selectedAction}"/&gt;<br /><br />    <br /><br />    &lt;header class="slds-modal__header slds-p-bottom_large"&gt;<br /><br />        <br /><br />        &lt;h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate"&gt;Notify&lt;/h2&gt;<br /><br />    &lt;/header&gt;<br /><br />    <br /><br />    <br /><br />    &lt;div class="slds-grid slds-gutters slds-p-bottom_large slds-p-top_large"&gt; <br /><br />        &lt;div class="slds-col slds-size_2-of-12"&gt;<br /><br />            &lt;div class="slds-text-heading_small"&gt;To:&lt;/div&gt;<br /><br />        &lt;/div&gt;<br /><br />        &lt;div aura:id="toContact" class="slds-col slds-size_5-of-12"&gt;<br /><br />            &lt;c:CustomLookUpComp uniqueName="toContact"<br /><br />                                iconName="standard:contact"<br /><br />                                methodName="c.getContacts"<br /><br />                                singleSelect="false"<br /><br />                                sObject="Contact"<br /><br />                                /&gt;   <br /><br />        &lt;/div&gt;<br /><br />        &lt;div class="slds-col slds-size_5-of-12"&gt;<br /><br />            &lt;c:CustomLookUpComp uniqueName="toUser"<br /><br />                                iconName="standard:user"<br /><br />                                methodName="c.getUsers"<br /><br />                                singleSelect="false"<br /><br />                                sObject="User"<br /><br />                                /&gt;   <br /><br />        &lt;/div&gt;<br /><br />    &lt;/div&gt;<br /><br />    &lt;div class="slds-grid slds-gutters"&gt; <br /><br />        &lt;div class="slds-col slds-size_2-of-12"&gt;<br /><br />            &lt;div class="slds-text-heading_small"&gt;cC:&lt;/div&gt;<br /><br />        &lt;/div&gt;<br /><br />        &lt;div class="slds-col slds-size_5-of-12"&gt;<br /><br />            &lt;c:CustomLookUpComp uniqueName="cCContact"<br /><br />                                iconName="standard:contact"<br /><br />                                methodName="c.getContacts"<br /><br />                                singleSelect="false"<br /><br />                                sObject="Contact"<br /><br />                                /&gt;   <br /><br />        &lt;/div&gt;<br /><br />        &lt;div class="slds-col slds-size_5-of-12"&gt;<br /><br />            &lt;c:CustomLookUpComp aura:id="Record"<br /><br />                                uniqueName="cCUser"<br /><br />                                iconName="standard:user"<br /><br />                                methodName="c.getUsers"<br /><br />                                singleSelect="false"<br /><br />                                sObject="User"<br /><br />                                selected="{!v.ownerId}"<br /><br />                                /&gt;   <br /><br />        &lt;/div&gt;<br /><br />    &lt;/div&gt;<br /><br />    <br /><br />    &lt;div class="slds-grid slds-gutters slds-p-top_large slds-p-bottom_large"&gt; <br /><br />        &lt;div class="slds-col slds-size_2-of-12"&gt;<br /><br />            &lt;div class="slds-text-heading_small"&gt;Subject:&lt;/div&gt;<br /><br />        &lt;/div&gt;<br /><br />        &lt;div class="slds-col slds-size_10-of-12"&gt;<br /><br />            &lt;lightning:input variant="label-hidden" value="{!v.subject}" placeholder="Subject"/&gt;<br /><br />        &lt;/div&gt;<br /><br />    &lt;/div&gt;<br /><br />    <br /><br />    &lt;div class="slds-grid slds-gutters slds-p-top_large"&gt; <br /><br />        &lt;div class="slds-col slds-size_2-of-12"&gt;<br /><br />            &lt;div class="slds-text-heading_small"&gt;Message:&lt;/div&gt;<br /><br />        &lt;/div&gt;<br /><br />        &lt;div class="slds-col slds-size_10-of-12"&gt;<br /><br />            &lt;lightning:inputRichText value="{!v.body}" placeholder="Email body...."/&gt;<br /><br />        &lt;/div&gt;<br /><br />    &lt;/div&gt;<br /><br />    <br /><br />    &lt;div class="slds-p-left_medium"&gt;<br /><br />        &lt;aura:iteration items="{!v.selected}" var="l"&gt;<br /><br />            &lt;li class="slds-listbox-item slds-truncate" role="presentation"&gt; <br /><br />                &lt;aura:if isTrue="{! v.selected}"&gt;<br /><br />                    &lt;lightning:pill class="" label="{!l.Title}" name="{!l}" onremove="{! c.handleRemoveOnly }" href="{!'/'+(l.Id)}"/&gt;<br /><br />                    <br /><br />                &lt;/aura:if&gt;<br /><br />            &lt;/li&gt;<br /><br />        &lt;/aura:iteration&gt;<br /><br />    &lt;/div&gt;<br /><br />    <br /><br /><br /><br />    <br /><br />    &lt;div class="slds-button-group slds-m-top_large slds-p-right_medium slds-float_right" style="margin-top: 2rem;" role="group"&gt;<br /><br />  &lt;lightning:button class="slds-m-top_medium slds-float_right" label="Attach" onclick="{!c.toOpenAttachments}"/&gt;<br /><br />        &lt;lightning:button class="slds-m-top_medium slds-float_right" variant="brand" label="Notify" onclick="{!c.sendMail}"/&gt;<br /><br />    &lt;/div&gt;<br /><br />    <br /><br />    &lt;div class="slds-button slds-m-top_medium slds-float_right"&gt;<br /><br />        &lt;c:AttachmentUploader recordId="{!v.recordId}"/&gt;<br /><br />    &lt;/div&gt;<br /><br />    <br /><br />    <br /><br />    &lt;c:selectAttachments isOpen="{!v.open}" recordId="{!v.recordId}"/&gt; <br /><br />    &lt;lightning:notificationsLibrary aura:id="notifLib"/&gt;<br /><br />    <br /><br />&lt;/aura:component&gt;<br /></code></pre></div></div><br /><h3 style="text-align: left;"><b>NotifyModalController.js</b></h3><div><pre class="lang-js"><code><br />({<br />    doinit : function(component, event, helper) {<br />        <br />        console.log("In Notify Doinit");<br />        var recid = component.get("v.recordId");<br />        console.log("recId:: "+recid);<br />        if(recid){<br />            var action = component.get("c.getContactOwners");<br />            action.setParams({<br />                recId : recid<br />            });<br />            <br />            action.setCallback(this, function(response){<br />                console.log("In call back doinit notify");<br />                var state = response.getState();<br />                console.log(state);<br />                if(state === "SUCCESS"){<br />                    var result = response.getReturnValue();<br />                    console.log("Result");<br />                    console.log(JSON.stringify(result));<br />                    component.set("v.ownerId", result);<br />                    <br />                    console.log("owner result");<br />                    console.log(result);<br />                    var childComp = component.find("Record");<br />                    console.log("childComp");<br />                    console.log(childComp);<br />                    childComp.prePopulateMethod(result);<br />                    <br />                }<br />               <br />            });<br />            $A.enqueueAction(action);<br />        }<br />    },<br />    <br />    finalValueAction : function(component, event, helper) {<br />        console.log("Handling Final value event");<br />        var values = event.getParams();<br />        console.log(JSON.stringify(values));<br />        <br />        //debugger;<br />        <br />        if(values.uniqueName === "cCUser"){<br />            console.log(values.finalValue.length);<br />            var cUser = [];<br />            for(var i = 0; i &lt; values.finalValue.length; i++){<br />                <br />                cUser.push(values.finalValue[i].Id);<br />            }<br />            <br />            component.set("v.cCUser", cUser);   <br />            console.log("cUser");<br />            console.log(JSON.stringify(cUser));<br />        }<br />        <br />        if(values.uniqueName === "cCContact"){<br />            <br />            var cContact = [];<br />            for(var i = 0; i &lt; values.finalValue.length; i++){<br />                <br />                cContact.push(values.finalValue[i].Id);<br />            }<br />            <br />            component.set("v.cCContact", cContact);  <br />            console.log("cContact");<br />            console.log(JSON.stringify(cContact));<br />        }<br />        <br />        if(values.uniqueName === "toUser"){<br />            <br />            var tUser = [];<br />            for(var i = 0; i &lt; values.finalValue.length; i++){<br />                <br />                tUser.push(values.finalValue[i].Id);<br />            }<br />            <br />            component.set("v.toUser", tUser);<br />            console.log("tUser");<br />            console.log(JSON.stringify(tUser));<br />        }<br />        <br />        if(values.uniqueName === "toContact"){<br />            <br />            var tContact = [];<br />            for(var i = 0; i &lt; values.finalValue.length; i++){<br />                <br />                tContact.push(values.finalValue[i].Id);<br />            }<br />            <br />            component.set("v.toContact", tContact);<br />            console.log("tContact");<br />            console.log(JSON.stringify(tContact));<br />        }<br />        <br />    },<br />    <br />    sendMail : function(component, event, helper) {<br />        //debugger;<br />        var cU = component.get("v.cCUser");<br />        console.log(JSON.stringify(cU));<br />        var cC = component.get("v.cCContact");<br />        console.log(JSON.stringify(cC));<br />        var tU = component.get("v.toUser");<br />        console.log(JSON.stringify(tU));<br />        var tC = component.get("v.toContact");<br />        console.log(JSON.stringify(tC));<br />        <br />        console.log("In send mail action");<br />        let c = [];<br />        if(cU.length &gt; 0){<br />            for(var i = 0; i &lt; cU.length; i++){<br />                c.push(cU[i]);<br />            }<br />        }<br />        if(cC.length &gt; 0){<br />            for(var i = 0; i &lt; cC.length; i++){<br />                c.push(cC[i]);<br />            }<br />        }<br />        <br />        let t = [];<br />        if(tU.length &gt; 0){<br />            for(var i = 0; i &lt; tU.length; i++){<br />                t.push(tU[i]);<br />            }<br />        }<br />        if(tC.length &gt; 0){<br />            for(var i = 0; i &lt; tC.length; i++){<br />                t.push(tC[i]);<br />            }<br />        }<br />        console.log(JSON.stringify(c));<br />        console.log(JSON.stringify(t));<br />        var emailSubject = component.get("v.subject");<br />        console.log(emailSubject);<br />        var emailBody = component.get("v.body");<br />        console.log(emailBody);<br />        var fileIds = component.get("v.selected");<br />        var file = [];<br />        for(var i = 0; i &lt; fileIds.length; i++){<br />            file.push(fileIds[i].Id);<br />        }<br />        console.log("file");<br />        console.log(file);<br />        <br />        var action = component.get("c.sendEmailApex");<br />        action.setParams({<br />            "toAddress" : t,<br />            "ccAddress" : c,<br />            "subject" : emailSubject,<br />            "body" : emailBody,<br />            "files" : file<br />        });<br />        <br />        action.setCallback(this, function(response){<br />            console.log("In call back of notify component on send button");<br />            var state = response.getState();<br />            console.log(state);<br />            if(state === "SUCCESS"){<br />                console.log("In success");<br />                /*var toast = $A.get("e.force:showToast");<br />                toast.setParams({<br />                    "title" : "Success!",<br />                    "message" : "Notify message sent successfully sent",<br />                    "type" : "success"<br />                });<br />                toast.fire();*/<br />                var message = component.find("notifLib").showNotice({<br />                    variant : "success",<br />                    header : "Message sent successfully",<br />                    message : "Notify message was sent successfully"<br />                    <br />                });<br />                 $A.get("e.force:closeQuickAction").fire();<br />                <br />            }else if(state === "ERROR"){<br />                console.log("In error");<br />                var errors = response.getError();<br />                console.log(errors);<br />                <br />                /*var toastEvent = $A.get("e.force:showToast");<br />                toastEvent.setParams({<br />                    "title" : "Error!",<br />                    "message" : errors[0].message,<br />                    "type" : "error"<br />                });<br />                toastEvent.fire();*/<br />                var message = component.find("notifLib").showNotice({<br />                    variant : "error",<br />                    header : "Error sending the message",<br />                    message : errors[0].message<br />                    <br />                });<br />                <br />            }<br />        });<br />        $A.enqueueAction(action);<br />    },<br />    <br />    toOpenAttachments : function(component, event, helper) {<br />        console.log("Opened small modal to select attachments");<br />        component.set("v.open", true);<br />    },<br />    <br />    selectedAction : function(component, event, helper) {<br />        console.log("Opened selectedAction");<br />        <br />        var select = event.getParam("selectedIds");<br />        component.set("v.selected", select);<br />        <br />    },<br />    <br />    handleRemoveOnly : function(component, event, helper) {<br />        console.log("in remove");<br />        var sel = event.getSource().get("v.name");<br />        console.log(JSON.stringify(sel));<br />        var lis = component.get("v.selected");<br />        console.log(JSON.stringify(lis));<br />        for(var i = 0; i &lt; lis.length; i++){<br />            console.log(JSON.stringify(lis[i]));<br />            console.log(lis[i].Id);<br />            console.log(sel.Id);<br />            console.log(lis[i].Id == sel.Id);<br />            if(lis[i].Id == sel.Id){<br />                <br />                lis.splice(i,1);<br />            }<br />        }<br />        <br />        component.set("v.selected", lis);<br />        console.log(JSON.stringify(lis));<br />    },<br /><br />})<br /></code></pre></div><br /><h3 style="text-align: left;">Events:</h3><h3 style="text-align: left;">AttachmentUploaderEvent.evt:</h3><pre class="lang-markup"><code><br />&lt;!-- AttachmentUploaderEvent --&gt;<br /><br />&lt;aura:event type="COMPONENT" description="Event template"&gt;<br /><br />    &lt;aura:attribute name="Uploaded" type="String"/&gt;<br /><br />&lt;/aura:event&gt;<br /></code></pre><br /><div><br /><h3 style="text-align: left;">DeleteNotifyComponentEvent.evt:</h3><pre class="lang-markup"><code><br />&lt;!-- DeleteNotifyComponentEvent --&gt;<br /><br />&lt;aura:event type="COMPONENT" description="Event template"&gt;<br /><br /> <br /><br />&lt;/aura:event&gt;<br /></code></pre></div><br /><h3 style="text-align: left;">DeleteAttachmentsEvent.evt:</h3><pre class="lang-markup"><code><br />&lt;!-- DeleteAttachmentsEvent --&gt;<br /><br />&lt;aura:event type="APPLICATION" description="Event template"&gt;<br /><br /> &lt;aura:attribute name="toDeleteIds" type="Object[]"/&gt;<br /><br />&lt;/aura:event&gt;<br /></code></pre><br /><h3 style="text-align: left;">DeleteRowEvent.evt:</h3><pre class="lang-markup"><code><br />&lt;aura:event type="COMPONENT" description="delete row"&gt;<br /><br /> &lt;aura:attribute name="rowIndex" type="Integer"/&gt;<br /><br />&lt;/aura:event&gt;<br /></code></pre><br /><br /><span style="font-size: large;"><br /></span> <br /><div style="background: 0px 0px rgb(255, 255, 255); border: 0px; color: #656565; font-family: &quot;Source Sans Pro&quot;, sans-serif; font-size: 15px; outline: 0px; padding: 0px; vertical-align: baseline;"><div style="background: 0px 0px; border: 0px; outline: 0px; padding: 0px; vertical-align: baseline;"><h2 style="background: 0px 0px; border: 0px; color: #2c3e50; font-size: 24px; margin: 0px 0px 15px; outline: 0px; padding: 0px; vertical-align: baseline;"><span style="background: 0px 0px; border: 0px; font-size: medium; outline: 0px; padding: 0px; vertical-align: baseline;"><span style="background: 0px 0px; border: 0px; color: #6aa84f; outline: 0px; padding: 0px; vertical-align: baseline;">One Small help</span>:</span></h2><span style="background: 0px 0px; border: 0px; font-size: medium; outline: 0px; padding: 0px; vertical-align: baseline;">If you enjoyed this blog post, share it with a friend!</span></div></div><div style="background: 0px 0px rgb(255, 255, 255); border: 0px; color: #656565; font-family: &quot;Source Sans Pro&quot;, sans-serif; font-size: 15px; outline: 0px; padding: 0px; vertical-align: baseline;"><span style="background: 0px 0px; border: 0px; font-size: medium; outline: 0px; padding: 0px; vertical-align: baseline;"><br /></span></div><div style="background: 0px 0px rgb(255, 255, 255); border: 0px; color: #656565; font-family: &quot;Source Sans Pro&quot;, sans-serif; font-size: 15px; outline: 0px; padding: 0px; vertical-align: baseline;"><span style="background: 0px 0px; border: 0px; font-size: medium; outline: 0px; padding: 0px; vertical-align: baseline;">Do&nbsp;<span style="background: 0px 0px; border: 0px; color: #e06666; outline: 0px; padding: 0px; vertical-align: baseline;">subscribe</span>, for getting latest updates directly in your inbox.</span></div></div><div class="blogger-post-footer">kishore
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-6753262254014660"
     data-ad-slot="4346718206"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div>