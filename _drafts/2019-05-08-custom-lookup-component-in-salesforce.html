---
layout: post
title: Custom Lookup Component in Salesforce Lightning - Updated
date: '2019-05-08T23:05:00.000-07:00'
author: Kishore Bandanadam
tags:
- Apex
- Lightning
modified_time: '2019-11-01T12:00:47.099-07:00'
thumbnail: https://3.bp.blogspot.com/-giR9jyV_ScY/XNZeookHRRI/AAAAAAAAAQg/K7NG-lxTyjEB3zkVqt0CGOtVZBgPZ3lHQCLcBGAs/s72-c/look.webp
blogger_id: tag:blogger.com,1999:blog-1420289748500157217.post-4251763539601733674
blogger_orig_url: https://www.salesforcelwc.in/2019/05/custom-lookup-component-in-salesforce.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" trbidi="on"><div class="tr_bq"><a href="https://www.salesforcelwc.in/2019/05/custom-lookup-component-in-salesforce.html" rel="">Custom Lookup Component | Salesforce Lightning</a></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-giR9jyV_ScY/XNZeookHRRI/AAAAAAAAAQg/K7NG-lxTyjEB3zkVqt0CGOtVZBgPZ3lHQCLcBGAs/s1600/look.webp" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img alt="Custom Lookup Component in Salesforce Lightning" border="0" data-original-height="410" data-original-width="640" src="https://3.bp.blogspot.com/-giR9jyV_ScY/XNZeookHRRI/AAAAAAAAAQg/K7NG-lxTyjEB3zkVqt0CGOtVZBgPZ3lHQCLcBGAs/s1600/look.webp" title="Custom Lookup Component in Salesforce Lightning" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><br /><h2 style="text-align: left;"><span style="color: #3d85c6;"><a href="https://www.salesforcelwc.in/2019/05/custom-lookup-component-in-salesforce.html" rel="">Custom Lookup Component in Salesforce Lightning </a></span></h2><h3 style="text-align: left;"><span style="color: #674ea7;"> Lookup Relationship in Salesforce:</span></h3><div style="text-align: justify;"><span style="font-size: large;">Creates a relationship between two records so you can associate them with each other. On the parent record, you can display a related list to show all of the records that are linked to it. You can create lookup relationship fields that link to users, standard objects, or custom objects. If a lookup field references a record that has been deleted, Salesforce clears the value of the lookup field by default. Alternatively, you can choose to prevent records from being deleted if theyâ€™re in a lookup relationship.</span><br /><span style="font-size: large;"></span><br /><a name='more'></a></div><input name="IL_IN_ARTICLE" type="hidden" /><br /><!-- Post Ad --><br /><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br /><!-- In Article Display Ads --><br /><ins class="adsbygoogle" data-ad-client="ca-pub-6753262254014660" data-ad-slot="9445070986" style="display: inline-block; height: 410px; width: 640px;"></ins><br /><script>     (adsbygoogle = window.adsbygoogle || []).push({}); </script><br /><!-- Post Ad --><br /><ul style="text-align: left;"><li><span style="font-size: large;">On a standard or custom object, a lookup relationship creates a field that allows users to click a lookup icon and select another record from a popup window.</span></li></ul><div><span style="font-size: large;">  <iframe allow="autoplay; fullscreen" allowfullscreen="" frameborder="0" height="366" src="https://player.vimeo.com/video/335591774" width="640"></iframe>  </span></div><h3 style="text-align: left;"><span style="color: #674ea7;"> Look-Up in Custom Lightning Components:</span></h3><div><span style="font-size: large;">When using look up in salesforce lightning components, Salesforce doesn't provide any specific input tag that renders Look-up field UI.</span></div><div><span style="font-size: large;"><br /></span></div><blockquote><span style="color: #6aa84f; font-size: large;">&lt;lightning:inputField  /&gt;&nbsp; tag which can render look up automatically, can only be used in</span><br /><ul><li style="text-align: left;"><span style="color: #6aa84f; font-size: large;">&lt;lightning:recordEditForm/&gt; </span></li></ul><ul><li style="text-align: left;"><span style="color: #6aa84f; font-size: large;">&lt;lightning:recordForm /&gt;</span></li></ul><ul><li style="text-align: left;"><span style="color: #6aa84f; font-size: large;">&lt;lightning:recordViewForm/&gt;</span></li></ul></blockquote><br /><span style="font-size: large;">So for this reason we have build a custom Look-up component.</span><br /><span style="font-size: large;"><br /></span> <span style="font-size: large;">The look-up component we are going to build is generic so that it can be re-used,</span><br /><br /><ul style="text-align: left;"><li><span style="font-size: large;">Not object specific&nbsp;</span></li><li><span style="font-size: large;">Supports multi select and single select</span></li><li><span style="font-size: large;">Able to pre-populate value</span></li></ul><div><span style="font-size: large;"><br /></span> <br /><blockquote class="tr_bq" style="text-align: left;"><span style="color: #674ea7; font-size: large;"><br /></span> <br /><h3 style="text-align: left;"><span style="color: #674ea7; font-size: large;">Flow:</span></h3><ul style="text-align: left;"><li><span style="font-size: large;"><span style="color: #0b5394;"><b>Step 1</b></span>: Create a apex class which returns a list of records (max of 5) based on the search term excluding the selected records (if any).</span></li></ul><ul style="text-align: left;"><li><span style="font-size: large;"><span style="color: #0b5394;"><b>Step 2</b></span>: Create a parent lightning component with a search input that calls apex class on key change with two parameters ('&lt;Search term&gt;' , '&lt;Selected records&gt;').</span></li></ul><ul style="text-align: left;"><li><span style="font-size: large;"><span style="color: #0b5394;"><b>Step 3</b></span>: Create a child component which displays list of records returned to parent.</span></li></ul><ul style="text-align: left;"><li><span style="font-size: large;"><span style="color: #0b5394;"><b>Step 4</b></span>: Display selected record as pills.</span></li></ul></blockquote><div><span style="font-size: large;"><br /></span></div></div><div><h3 style="text-align: left;"><span style="color: #674ea7;">Controller:</span></h3></div><ul style="text-align: left;"><li><span style="font-size: large;">ContactController</span></li></ul><div><span style="font-size: large;"><br /></span></div><h3 style="text-align: left;"><span style="color: #674ea7;">Components:</span></h3><ul style="text-align: left;"><li><span style="font-size: large;">CustomLookUpComp (Parent)</span></li><li><span style="font-size: large;">childLookUp (Child)</span></li></ul><div><span style="font-size: large;"><br /></span></div><h3 style="text-align: left;"><span style="color: #674ea7;">Events:</span></h3><ul style="text-align: left;"><li><span style="font-size: large;">CustomLookUpFinalValueEvent</span></li><li><span style="font-size: large;">LookupEventToParent</span></li></ul><div><span style="font-size: large;"><br /></span></div><h3 style="text-align: left;"><span style="color: #674ea7;">ContactController.apxc</span></h3><div></div><pre class="lang-js"><code><br />public class ContactController {<br />    <br />    <br />    @AuraEnabled<br />    public static List<contact> getContacts(String searchTerm, List<contact> selectedOptions) {<br />        List<string> Ids = new List<string>();<br />        <br />        for(Contact c : selectedOptions){<br />            Ids.add(c.Id);<br />        }<br />        system.debug('selectedOptions:::'+selectedOptions);<br />        system.debug('Ids:::'+Ids);<br />        if(selectedOptions != NULL){<br />            List<contact> conList = [Select Id, Name from Contact Where Name Like  : ('%'+searchTerm+'%') AND (Id != : Ids) LIMIT  5];<br />            system.debug('conList:::'+conList);<br />            return conList;<br />        }else{<br />            List<contact> conList = [Select Id, Name from Contact Where Name Like  : ('%'+searchTerm+'%') LIMIT  5];<br />            system.debug('conList:::'+conList);<br />            return conList;    <br />        }<br />    }<br />    <br />    @AuraEnabled<br />    public static List<user> getUsers(String searchTerm, List<user> selectedOptions) {<br />        List<string> Ids = new List<string>();<br />        <br />        for(User c : selectedOptions){<br />            Ids.add(c.Id);<br />        }<br />        system.debug('selectedOptions:::'+selectedOptions);<br />        system.debug('Ids:::'+Ids);<br />        if(selectedOptions != NULL){<br />            List<user> userList = [Select Id, Name from User Where Name Like  : ('%'+searchTerm+'%') AND (Id != : Ids) LIMIT  5];<br />            system.debug('userList:::'+userList);<br />            return userList;<br />        }else{<br />            List<user> userList = [Select Id, Name from User Where Name Like  : ('%'+searchTerm+'%') LIMIT  5];<br />            system.debug('userList:::'+userList);<br />            return userList;    <br />        }<br />    }<br />}<br /></user></user></string></string></user></user></contact></contact></string></string></contact></contact></code></pre></div></div><br /><h3 style="text-align: left;"><span style="color: #674ea7;">CustomLookUpComp.cmp</span></h3><pre class="lang-markup"><code><br />&lt;pre class="lang-js"&gt;&lt;code&gt;<br />&lt;!-- CustomLookUpComp --&gt;<br />&lt;aura:component controller="ContactController" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global" &gt;<br />    <br />    &lt;!-- Main attributes Start --&gt;<br />    &lt;aura:attribute name="uniqueName" type="String" required="true" default="lookup1"/&gt;&lt;!--If not entered it takes default value--&gt;<br />    &lt;aura:attribute name="iconName" type="String" default="standard:contact" required="true"/&gt;<br />    &lt;aura:attribute name="methodName" type="String" default="c.getContacts" required="true"/&gt;<br />    &lt;aura:attribute name="singleSelect" type="Boolean" default="true"/&gt;<br />    &lt;aura:attribute name="sObject" type="String" default="Contact" required="true"/&gt;<br />    &lt;aura:attribute name="selected" type="Map[]"/&gt;&lt;!--Optional If you want any pre-population can use this to pass that record Id value--&gt;<br />    &lt;!-- Main attributes End --&gt;<br />    <br />    &lt;aura:attribute name="sTerm" type="string" default=""/&gt;<br />    &lt;aura:attribute name="conList" type="Map[]"/&gt;<br />    &lt;aura:attribute name="blurTimeout" type="Integer"/&gt;<br />    <br />    &lt;!-- Register Final value Event --&gt;<br />    &lt;aura:registerEvent name="CustomLookUpFinalValueEvent" type="c:CustomLookUpFinalValueEvent"/&gt;<br />    <br />    &lt;!-- Handlers --&gt;<br />    &lt;aura:handler name="init" value="{!this}" action="{!c.doInit}"/&gt;<br />    &lt;aura:handler name="LookupEventToParent" event="c:LookupEventToParent" action="{!c.handleEvent}"/&gt;<br />    <br />    &lt;!-- Method to send pre-populate lookUp value to the requested component: parent to lookup--&gt;<br />    &lt;aura:method name="prePopulateMethod" action="{!c.render}"&gt;<br />        &lt;aura:attribute name="populatedRecord" type="Map[]"/&gt;<br />    &lt;/aura:method&gt;<br />    <br />    &lt;aura:if isTrue="{!v.singleSelect}"&gt;<br />        &lt;div class="slds-form-element"&gt;<br />            &lt;div class="slds-form-element__control"&gt;<br />                &lt;div class="slds-combobox_container slds-has-selection"&gt;<br />                    &lt;div aura:id="toOpen" class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" aria-expanded="true" aria-haspopup="listbox" role="combobox"&gt;<br />                        &lt;div class=" slds-input-has-icon slds-input-has-icon_right" role="none"&gt;<br />                            <br />                            &lt;div&gt;<br />                                &lt;div aura:id="input" class="slds-p-top_none" &gt;<br />                                    &lt;lightning:input class="slds-p-top_none" variant="label-hidden" name="Search" value="{!v.sTerm}" onblur="{!c.onblur}" onclick="{!c.onfocus}" onchange="{!c.onchange}" placeholder="{!'Select ' + (v.sObject)}"/&gt;<br />                                    <br />                                    &lt;span class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right "&gt;<br />                                        &lt;span class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true"&gt;<br />                                            &lt;lightning:icon class="" iconName="utility:search" size="x-small" alternativeText="Search" /&gt;<br />                                        &lt;/span&gt;<br />                                    &lt;/span&gt;<br />                                &lt;/div&gt;<br />                                &lt;aura:if isTrue="{!v.selected}"&gt;<br />                                    &lt;div aura:id="lookup-pill" class="slds-pill-container slds-hide"&gt;<br />                                        &lt;aura:iteration items="{!v.selected}" var="l"&gt;<br />                                            &lt;lightning:pill class="pillSize" label="{!l.Name}" name="{!l}" onremove="{! c.handleRemoveOnly }" href="{!'/'+(l.Id)}"&gt;<br />                                                &lt;aura:set attribute="media"&gt;<br />                                                &lt;lightning:icon iconName="{!v.iconName}"  alternativeText="{!v.iconName}"/&gt;<br />                                                &lt;/aura:set&gt;<br />                                            &lt;/lightning:pill&gt;<br />                                        &lt;/aura:iteration&gt;<br />                                    &lt;/div&gt;<br />                                &lt;/aura:if&gt;<br />                            &lt;/div&gt;<br />                            <br />                        &lt;/div&gt;<br />                        &lt;div onfocus="{!c.onfocus}" id="listbox-id-1" class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid" role="listbox"&gt;<br />                            &lt;ul class="slds-listbox slds-listbox_vertical" role="presentation"&gt;<br />                                &lt;aura:iteration items="{!v.conList}" var="listItem"&gt;<br />                                    &lt;span &gt;&lt;c:childLookUp myContact="{!listItem}" icon="{!v.iconName}" object="{!v.sObject}"/&gt;&lt;/span&gt;<br />                                &lt;/aura:iteration&gt;<br />                                <br />                            &lt;/ul&gt;<br />                        &lt;/div&gt;<br />                    &lt;/div&gt;<br />                &lt;/div&gt;<br />            &lt;/div&gt;<br />        &lt;/div&gt;<br />        <br />        &lt;!-- Multi Select Start--&gt;<br />        &lt;aura:set attribute="else"&gt;<br />            &lt;div class="slds-form-element"&gt;<br />                &lt;div class="slds-form-element__control"&gt;<br />                    &lt;div class="slds-combobox_container slds-has-selection"&gt;<br />                        &lt;div aura:id="toOpen" class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" aria-expanded="true" aria-haspopup="listbox" role="combobox"&gt;<br />                            &lt;div class=" slds-input-has-icon slds-input-has-icon_right" role="none"&gt;<br />                                <br />                                &lt;div&gt;<br />                                    <br />                                    &lt;lightning:input class="slds-p-top_none" variant="label-hidden" name="Search" value="{!v.sTerm}" onblur="{!c.onblur}" onclick="{!c.onfocus}" onchange="{!c.onchange}" placeholder="{!'Select ' + (v.sObject)}"/&gt;<br />                                    <br />                                    &lt;span class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right"&gt;<br />                                        &lt;span class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true"&gt;<br />                                            &lt;lightning:icon iconName="utility:search" size="x-small" alternativeText="Search" /&gt;<br />                                        &lt;/span&gt;<br />                                    &lt;/span&gt;     <br />                                    <br />                                &lt;/div&gt;<br />                                <br />                            &lt;/div&gt;<br />                            &lt;div onfocus="{!c.onfocus}" id="listbox-id-1" class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid" role="listbox"&gt;<br />                                &lt;ul class="slds-listbox slds-listbox_vertical" role="presentation"&gt;<br />                                    <br />                                    &lt;aura:iteration items="{!v.conList}" var="listItem"&gt;<br />                                        &lt;span &gt;&lt;c:childLookUp myContact="{!listItem}" icon="{!v.iconName}" object="{!v.sObject}"/&gt;&lt;/span&gt;<br />                                    &lt;/aura:iteration&gt;<br />                                    <br />                                &lt;/ul&gt;<br />                            &lt;/div&gt;<br />                        &lt;/div&gt;<br />                    &lt;/div&gt;<br />                &lt;/div&gt;<br />                <br />                &lt;!--div class="slds-listbox_selection-group slds-listbox-toggle"--&gt;<br />                    <br />                    &lt;ul class="slds-listbox slds-listbox_horizontal" role="listbox" aria-label="Selected Options:" aria-orientation="horizontal"&gt;<br />                        &lt;aura:iteration items="{!v.selected}" var="l"&gt;<br />                            &lt;li class="slds-listbox-item slds-truncate" role="presentation"&gt; <br />                                &lt;aura:if isTrue="{! v.selected}"&gt;<br />                                    &lt;lightning:pill class="" label="{!l.Name}" name="{!l}" onremove="{! c.handleRemoveOnly }" href="{!'/'+(l.Id)}"&gt;<br />                                        &lt;aura:set attribute="media"&gt;<br />                                        &lt;lightning:icon iconName="{!v.iconName}" alternativeText="{!v.iconName}"/&gt;<br />                                        &lt;/aura:set&gt;<br />                                    &lt;/lightning:pill&gt;<br />                                &lt;/aura:if&gt;<br />                            &lt;/li&gt;<br />                        &lt;/aura:iteration&gt;<br />                    &lt;/ul&gt;<br />                   <br />                &lt;!--/div--&gt;<br />            &lt;/div&gt;<br />        &lt;/aura:set&gt; <br />        &lt;!-- Multi Select End--&gt;<br />    &lt;/aura:if&gt;<br />&lt;/aura:component&gt;<br />&lt;/pre&gt;&lt;/code&gt;<br /></code></pre></div><br /><h3 style="text-align: left;"><span style="color: #674ea7;">CustomLookUpCompController.js</span></h3><pre><code class="language-js">({<br />    doInit : function(component, event, helper) {<br />  helper.doInit(component, event, helper);<br />    },<br />    <br />    render : function(component, event, helper) {<br />  helper.render(component, event, helper);<br />    },<br />    <br />    onchange : function(component, event, helper) {<br />        helper.onchange(component, event, helper);<br />    },<br />    <br />    onblur : function(component, event, helper) {<br />        helper.onblur(component, event, helper);<br />    },<br />    <br />    onfocus : function(component, event, helper) {<br />        helper.onfocus(component, event, helper);<br />    },<br />    <br />    handleRemoveOnly : function(component, event, helper) {<br />        helper.handleRemoveOnly(component, event, helper);<br />    },<br />    <br />    onOptionClick : function(component, event, helper) {<br />        helper.onOptionClick(component, event, helper);<br />    },<br />    <br />    handleEvent : function(component, event, helper) {<br />        helper.handleEvent(component, event, helper);<br />    },<br />})<br /></code></pre><br /><!--PostAd--><br /><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br /><!-- In Post --><br /><ins class="adsbygoogle"      style="display:block"      data-ad-client="ca-pub-6753262254014660"      data-ad-slot="8484998091"      data-ad-format="auto"      data-full-width-responsive="true"></ins><br /><script>     (adsbygoogle = window.adsbygoogle || []).push({}); </script><br /><!--PostAd--><br /><br /><h3 style="text-align: left;"><span style="color: #674ea7;">CustomLookUpCompHelper.js</span></h3><pre class="lang-js"><code><br />({ <br />    doInit : function(component, event, helper) {<br />     //As of now does nothing<br />  <br />    },<br />    <br />    render : function(component, event, helper) {<br />     //This is to send the prepopulated value through event to parent<br />        console.log("In render");<br />        var args = event.getParam("arguments");<br />        console.log(JSON.stringify(args));<br />        console.log(JSON.stringify(args.populatedRecord));<br />        if(args){<br />            // Firing Final value event<br />            var finalEvent = component.getEvent("CustomLookUpFinalValueEvent");<br />            var uName = component.get("v.uniqueName");<br />            console.log("Final Event fired:: "+uName);<br />            finalEvent.setParams({<br />                uniqueName : uName,<br />                finalValue : args.populatedRecord                <br />            });<br />            finalEvent.fire();<br />        }else{<br />            console.log("Didnt get any record to pre-populate");<br />        }<br />    },<br />    <br />    onchange : function(component, event, helper) {<br />        <br />        console.log("Onchange");<br />        var icon = component.get("v.iconName");<br />        var Object = component.get("v.sObject");<br />        <br />        console.log("icon:: "+icon);<br />        console.log("Object:: "+Object);<br />        // Setting method name dynamically<br />        var methodName = component.get("v.methodName");<br />        console.log(methodName);<br />        /*Send this value to server to get values other than in this list*/<br />        var selected = component.get("v.selected");<br />        console.log("selected");<br />        console.log(JSON.stringify(selected));<br />        <br />        var action = component.get(methodName);<br />        var term = component.get("v.sTerm");<br />        <br />        action.setParams({<br />            "searchTerm" :  term,<br />            "selectedOptions" : selected<br />        });<br />        <br />        if(term.length &gt; 0){<br />            action.setCallback(this, function(response){<br />                var state = response.getState();<br />                console.log(state);<br />                if(state === "SUCCESS")  {<br />                    var result = response.getReturnValue();<br />                    console.log(JSON.stringify(result));<br />                    console.log(result);<br />                    component.set("v.conList", result);<br />                    if(term != "" &amp;&amp; result.length &gt; 0){<br />                        var ToOpen = component.find("toOpen");<br />                        $A.util.addClass(ToOpen, "slds-is-open");<br />                    }else{<br />                        var ToOpen = component.find("toOpen");<br />                        $A.util.removeClass(ToOpen, "slds-is-open");<br />                    }<br />                }<br />                <br />            });<br />            <br />            $A.enqueueAction(action);<br />        }<br />    },<br />    <br />    onblur : function(component, event, helper) {<br />        <br />        <br />        //Setting timeout so that we can capture the value onclick<br />        const blurTimeout = window.setTimeout(<br />            $A.getCallback(() =&gt; {<br />                var ToOpen = component.find("toOpen");<br />                $A.util.removeClass(ToOpen, "slds-is-open");<br />            }),<br />            300<br />        );<br />        component.set('v.blurTimeout', blurTimeout);<br />    },<br />    <br />    onfocus : function(component, event, helper) {<br />        var term = component.get("v.sTerm");<br />        var returnedResults = component.get("v.conList");<br />        console.log("in onfocus");<br />        console.log(term);<br />        if(term &amp;&amp; returnedResults.length &gt; 0){<br />            var ToOpen = component.find("toOpen");<br />            $A.util.addClass(ToOpen, "slds-is-open");<br />        }<br />        <br />    },<br />    <br />    handleRemoveOnly : function(component, event, helper) {<br />        <br />        var singleSel = component.get("v.singleSelect");<br />        if(singleSel){<br />            console.log("in remove");<br />            var sel = event.getSource().get("v.name");<br />            console.log(JSON.stringify(sel));<br />            var lis = component.get("v.selected");<br />            console.log(JSON.stringify(lis));<br />            for(var i = 0; i &lt; lis.length; i++){<br />                console.log(JSON.stringify(lis[i]));<br />                console.log(lis[i].Id == sel.Id);<br />                if(lis[i].Id == sel.Id){<br />                    <br />                    lis.splice(i,1);<br />                }<br />            }<br />            <br />            component.set("v.selected", lis);<br />            console.log(JSON.stringify(lis));<br />            <br />            var Input = component.find("input");<br />            $A.util.removeClass(Input, "slds-hide");<br />            <br />            var lookupPill = component.find("lookup-pill");<br />            $A.util.addClass(lookupPill, "slds-hide");<br />            <br />            // Firing Final value event<br />            var finalEvent = component.getEvent("CustomLookUpFinalValueEvent");<br />            var uName = component.get("v.uniqueName");<br />            console.log("Final Event fired "+uName);<br />            finalEvent.setParams({<br />                uniqueName : uName,<br />                finalValue : lis                <br />            });<br />            finalEvent.fire();<br />            <br />        }else{<br />            console.log("in remove");<br />            var sel = event.getSource().get("v.name");<br />            console.log(JSON.stringify(sel));<br />            var lis = component.get("v.selected");<br />            console.log(JSON.stringify(lis));<br />            for(var i = 0; i &lt; lis.length; i++){<br />                console.log(JSON.stringify(lis[i]));<br />                console.log(lis[i].Id);<br />                console.log(sel.Id);<br />                console.log(lis[i].Id == sel.Id);<br />                if(lis[i].Id == sel.Id){<br />                    <br />                    lis.splice(i,1);<br />                }<br />            }<br />            <br />            component.set("v.selected", lis);<br />            console.log(JSON.stringify(lis));<br />            <br />            // Firing Final value event<br />            var finalEvent = component.getEvent("CustomLookUpFinalValueEvent");<br />            var uName = component.get("v.uniqueName");<br />            console.log("Final Event fired "+uName);<br />            finalEvent.setParams({<br />                uniqueName : uName,<br />                finalValue : lis                <br />            });<br />            finalEvent.fire();<br />        }<br />    },<br />    <br />    handleEvent : function(component, event, helper) {<br />        <br />        var lookupEventToParent = event.getParam("selectedItem");<br />        /* selectedValue attribute is used to de duplicate the list box options in dropdown after selecting a value. so that the value does not repeat in box after selecting once*/<br /><br />        console.log("In event handler");<br />        console.log(JSON.stringify(lookupEventToParent));<br />        var singleSel = component.get("v.singleSelect");<br />        <br />        if(!singleSel){<br />            var selectedList = [];<br />            var existing = component.get("v.selected");<br />            if(existing.length &gt; 0){<br />                for(var i = 0; i &lt; existing.length; i++){<br />                    selectedList.push(existing[i]);<br />                }<br />            }<br />            selectedList.push(lookupEventToParent);<br />            console.log(JSON.stringify(selectedList));<br />            component.set("v.selected", selectedList);<br />            <br />            const blurTimeout = component.get('v.blurTimeout');<br />            if (blurTimeout) {<br />                clearTimeout(blurTimeout);<br />            }<br />            var ToOpen = component.find("toOpen");<br />            $A.util.removeClass(ToOpen, "slds-is-open");<br />            <br />            //Empty Search string<br />            component.set("v.sTerm", "");<br />            <br />            // Firing Final value event<br />            var finalEvent = component.getEvent("CustomLookUpFinalValueEvent");<br />            var uName = component.get("v.uniqueName");<br />            console.log("Final Event fired "+uName);<br />            finalEvent.setParams({<br />                uniqueName : uName,<br />                finalValue : selectedList                <br />            });<br />            finalEvent.fire();<br />            <br />            <br />        }else{<br />            var selectedList = [];<br />            //var existing = component.get("v.selected");<br />            selectedList.push(lookupEventToParent);<br />            console.log(JSON.stringify(selectedList));<br />            component.set("v.selected", selectedList);<br />            <br />            var Input = component.find("input");<br />            $A.util.addClass(Input, "slds-hide");<br />            <br />            var lookupPill = component.find("lookup-pill");<br />            $A.util.removeClass(lookupPill, "slds-hide");<br />            <br />            const blurTimeout = component.get('v.blurTimeout');<br />            if (blurTimeout) {<br />                clearTimeout(blurTimeout);<br />            }<br />            var ToOpen = component.find("toOpen");<br />            $A.util.removeClass(ToOpen, "slds-is-open");<br />            //Empty Search string<br />            component.set("v.sTerm", "");<br />            <br />            // Firing Final value event<br />            var finalEvent = component.getEvent("CustomLookUpFinalValueEvent");<br />            var uName = component.get("v.uniqueName");<br />            console.log("Final Event fired "+uName);<br />            finalEvent.setParams({<br />                uniqueName : uName,<br />                finalValue : selectedList                <br />            });<br />            finalEvent.fire();<br />        }<br />    }<br />})<br /></code></pre><br /><h3 style="text-align: left;"><span style="color: #674ea7;">childLookUp.cmp</span></h3><pre class="lang-markup"><code>&lt;aura:component controller="ContactController" implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global" &gt;<br />    <br />    &lt;aura:attribute name="myContact" type="Map"/&gt;<br />    &lt;aura:attribute name="icon" type="String"/&gt;<br />    &lt;aura:attribute name="object" type="String"/&gt;<br />    &lt;aura:handler name="init" value="{!this}" action="{!c.doinit}"/&gt;<br />    &lt;aura:registerEvent name="LookupEventToParent" type="c:LookupEventToParent"/&gt;<br />    <br />    &lt;li role="presentation" class="slds-listbox__item " onclick ="{!c.onOptionClick}"&gt;<br />        &lt;div id="option1" class="slds-media slds-listbox__option slds-listbox__option_entity slds-media_center" role="option"&gt;<br />            &lt;span class="slds-media__figure slds-listbox__option-icon"&gt;<br />                &lt;span class="slds-icon_container slds-icon-standard-account"&gt;<br />                    &lt;div class="slds-icon slds-icon_small" aria-hidden="true"&gt;<br />                        &lt;lightning:icon iconName="{!v.icon}" alternativeText="{!v.object}" size="small"/&gt;<br />                    &lt;/div&gt;<br />                &lt;/span&gt;<br />            &lt;/span&gt;<br />            &lt;span class="slds-media__body"&gt;<br />                &lt;span class="slds-listbox"&gt;<br />                    {!v.myContact.Name}                     <br />                &lt;/span&gt;<br />            &lt;/span&gt;<br />        &lt;/div&gt;<br />    &lt;/li&gt;<br />&lt;/aura:component&gt;<br /></code></pre><h3 style="text-align: left;"><span style="color: #674ea7;"><br /></span></h3><h3 style="text-align: left;"><span style="color: #674ea7;">childLookController.js</span></h3><pre class="lang-js"><code>({ <br />    doinit : function(component, event, helper) {<br />        console.log("In Child lookup Init");<br />        var icon = component.get("v.iconName");<br />        var Object = component.get("v.sObject");<br />        <br />        console.log("icon:: "+icon);<br />        console.log("Object:: "+Object);<br />    },<br />    <br /> onOptionClick : function(component, event, helper) {<br />  console.log("In child init");<br />        var selVal  = component.get("v.myContact");<br />        console.log(selVal);<br />        <br />        var evt = component.getEvent("LookupEventToParent");<br />        evt.setParams({<br />            selectedItem : selVal<br />        });<br />        evt.fire();<br /> }<br />})<br /></code></pre><br /><h3 style="text-align: left;"><span style="color: #674ea7;">CustomLookUpFinalValueEvent.evt</span></h3><pre class="lang-markup"><code><br />&lt;!-- CustomLookUpFinalValueEvent --&gt;<br />&lt;aura:event type="COMPONENT" description="Event template"&gt;<br />    <br />    &lt;aura:attribute name="uniqueName" type="String"/&gt;<br />    &lt;aura:attribute name="finalValue" type="Map[]"/&gt;<br />&lt;/aura:event&gt;<br /></code></pre><br /></div><h3 style="text-align: left;"><span style="color: #674ea7;">LookupEventToParent.evt</span></h3><pre class="lang-markup"><code><br />&lt;!-- LookupEventToParent --&gt;<br />&lt;aura:event type="COMPONENT" description="Event template"&gt;<br /> <br />    &lt;aura:attribute name="selectedItem" type="Map"/&gt;<br />&lt;/aura:event&gt;<br /></code></pre><br /><br /><h3 style="text-align: left;"><span style="color: #674ea7; font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;">UPDATE:</span></h3><ol style="text-align: left;"><li><span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;">Now you can use this look up component for any object with only one apex method by using this piece of code.</span></li><li><span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;">We have used dynamic query so that, there is no need to write method for each and every object.</span></li><li><span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;">Please find the changes below.</span></li></ol><div><span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;"><br /></span></div><div><span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;">To&nbsp;<i><span style="color: #cc0000;">ContactController.apxc</span></i> apex class add the following method&nbsp;</span><span style="color: #6aa84f; font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;"><i>lookUp()</i></span><span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;">.</span></div><br /><pre class="lang-js"><code><br />@AuraEnabled<br />    public static List<sobject> lookUp(String searchTerm, List<sobject> selectedOptions, string myObject) {<br />        List<string> Ids = new List<string>();<br />        <br />        for(sObject c : selectedOptions){<br />            Ids.add(c.Id);<br />        }<br />        <br />        if(selectedOptions != NULL){<br />            String myQuery = 'Select Id, Name from '+myObject+' Where Name Like  \'%' + searchTerm + '%\' AND (Id != : Ids) LIMIT  5';<br />            List<sobject> lookUpList = database.query(myQuery);<br />            system.debug('lookUpList:::'+lookUpList);<br />            return lookUpList;<br />        }else{<br />            String myQuery = 'Select Id, Name from '+myObject+' Where Name Like  \'%' + searchTerm + '%\' AND (Id != : Ids) LIMIT  5';<br />                List<sobject> lookUpList = database.query(myQuery);<br />                system.debug('lookUpList:::'+lookUpList);<br />                return lookUpList;    <br />        }<br />    }<br /></sobject></sobject></string></string></sobject></sobject></code></pre><br /><span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;"><br /></span> <span style="font-family: &quot;georgia&quot; , &quot;times new roman&quot; , serif; font-size: large;">To <i><span style="color: #cc0000;">CustomLookUpCompHelper.js</span></i> add the line&nbsp; <i><span style="color: #6aa84f;">"myObject" : Object</span></i>&nbsp;as show below</span><br /><br /><pre class="lang-js"><code><br />        action.setParams({<br />            "searchTerm" :  term,<br />            "selectedOptions" : selected,<br />            "myObject" : Object //Updated Add this line in your code<br />        });<br /></code></pre><br /><span style="font-size: large;">Will keep you posted with updates ðŸ˜ƒ</span><br /><span style="font-size: large;"><br /></span> <span style="font-size: large;">What other ideas can you add to this list that I may have not mentioned?</span><br /><div><span style="font-size: large;"><br /></span> <br /><div><span style="font-size: large;">What kinds of content would you like to see more on this blog?</span></div><div><br /></div><div><span style="font-size: large;">Please let me know in the comments below...</span><br /><div><span style="font-size: large;"><br /></span></div><div><span style="color: #6aa84f; font-size: large;">One Small help:</span><br /><span style="color: #6aa84f; font-size: large;"><br /></span></div><span style="font-size: large;">If you enjoyed this blog post, share it with a friend!</span></div></div><div><span style="font-size: large;"><br /></span></div><div><span style="font-size: large;">Do subscribe, for getting latest updates directly in your inbox.</span></div><br /><!-- Post Ad --><br /><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br /><!-- In Article Display Ads --><br /><ins class="adsbygoogle" data-ad-client="ca-pub-6753262254014660" data-ad-slot="9445070986" style="display: inline-block; height: 410px; width: 640px;"></ins><br /><script>     (adsbygoogle = window.adsbygoogle || []).push({}); </script><br /><!-- Post Ad --><br /></div><div class="blogger-post-footer">kishore
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-6753262254014660"
     data-ad-slot="4346718206"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div>